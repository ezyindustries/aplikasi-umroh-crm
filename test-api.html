<!DOCTYPE html>
<html>
<head>
    <title>Test Automation API</title>
</head>
<body>
    <h1>Test Automation API</h1>
    <button onclick="testCreateRule()">Test Create Rule</button>
    <button onclick="testGetRules()">Test Get Rules</button>
    <div id="result"></div>

    <script>
        const API_BASE = 'http://localhost:3003/api';
        
        async function testCreateRule() {
            try {
                const formData = new FormData();
                const ruleData = {
                    name: "Test Welcome Message",
                    description: "Greet new customers automatically",
                    ruleType: "welcome",
                    responseMessages: [{
                        type: "text",
                        content: "Assalamualaikum! Selamat datang di Vauza Tamma. Ada yang bisa kami bantu?",
                        order: 0
                    }],
                    responseDelay: 2,
                    messageDelay: 1,
                    keywords: []
                };
                
                formData.append('ruleData', JSON.stringify(ruleData));
                
                const response = await fetch(`${API_BASE}/automation/rules`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                document.getElementById('result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('result').innerHTML = `Error: ${error.message}`;
            }
        }
        
        async function testGetRules() {
            try {
                const response = await fetch(`${API_BASE}/automation/rules`);
                const result = await response.json();
                document.getElementById('result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('result').innerHTML = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>